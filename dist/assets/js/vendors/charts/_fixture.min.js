"use strict";var fixtureChart=echarts.init(document.getElementById("fixture"));null===localStorage.getItem("fixtureLeague")&&localStorage.setItem("fixtureLeague","premier-league"),null===localStorage.getItem("fixtureWeek")&&localStorage.setItem("fixtureWeek","1"),null===localStorage.getItem("LeagueName")&&localStorage.setItem("LeagueName","Premier League");var SaveIcon="./assets/img/template-images/screenshot.svg",curveness=.2;function GetFixtures(b,x,S){$.get("./assets/data/"+x+"/fixture.json",function(e){var t,o=[],a=[],r=[],n=[],i=[],s=[],l=[],g=[];o.push(e.RECORDS);var c=o[0].map(function(e){return e.week_id}).filter(function(e,t,o){return o.indexOf(e)===t}).sort(function(e,t){return e-t}).map(function(t){var e=o[0].filter(function(e){return e.week_id==t}).map(function(e){return e});return{week:t,datas:e}});$.each(c,function(e,t){t.week==b&&a.push(t)}),console.log(a);for(var u="",f="",m="",d="",h=0;h<a[0].datas.length;h++){var p="";g.push(h+1),f=(p=a[0].datas[h]).hscore>p.ascore?(u="rgb(59,178,115)","rgb(69,188,125)"):p.hscore<p.ascore?(u="rgb(225,85,84)","rgb(235,95,94)"):(p.hscore=p.ascore)?(u="rgb(64,63,76)","rgb(74,73,86)"):(u="rgb(95,92,124)","rgb(105,102,134)"),d=p.hscore<p.ascore?(m="rgb(59,178,115)","rgb(69,188,125)"):p.hscore>p.ascore?(m="rgb(225,85,84)","rgb(235,95,94)"):(p.hscore=p.ascore)?(m="rgb(64,63,76)","rgb(74,73,86)"):(m="rgb(95,92,124)","rgb(105,102,134)"),i.push({label:{position:"insideLeft",offset:[-20,0],rich:{logo:{backgroundColor:{image:"./assets/img/leagues/"+x+"/team-logo/"+p.t1logo+".png"},width:50,height:50},name:{fontFamily:"Quantico, sans-serif",fontSize:10,color:"#fff",textBorderColor:"transparent",padding:[0,0,0,20]}},formatter:function(e){return"{logo|}{name|"+e.name+"}"}}}),n.push({value:45,name:p.HOMETEAM,itemStyle:{barBorderRadius:[25,0,0,25],color:new echarts.graphic.LinearGradient(0,1,0,0,[{offset:0,color:u},{offset:.5,color:u},{offset:.5,color:f},{offset:1,color:f}])},label:{position:"insideLeft",offset:[-20,0],rich:{logo:{backgroundColor:{image:"./assets/img/leagues/"+x+"/team-logo/"+p.t1logo+".png"},width:50,height:50},name:{fontFamily:"Quantico, sans-serif",fontSize:20,color:"#fff",textBorderColor:"transparent",padding:[0,0,0,20]}},formatter:function(e){return"{logo|}{name|"+e.name+"}"}}}),s.push({value:45,name:p.AWAYTEAM,itemStyle:{barBorderRadius:[0,25,25,0],color:new echarts.graphic.LinearGradient(0,1,0,0,[{offset:0,color:m},{offset:.5,color:m},{offset:.5,color:d},{offset:1,color:d}])},label:{position:"insideRight",offset:[20,0],rich:{logo:{backgroundColor:{image:"./assets/img/leagues/"+x+"/team-logo/"+p.t2logo+".png"},width:50,height:50},name:{fontFamily:"Quantico, sans-serif",fontSize:20,color:"#fff",textBorderColor:"transparent",padding:[0,30,0,0]}},formatter:function(e){return"{name|"+e.name+"}{logo|}"}}}),l.push({value:10,name:p.id,itemStyle:{color:new echarts.graphic.LinearGradient(1,1,0,0,[{offset:0,color:"rgb(0,0,0)"},{offset:.5,color:"rgb(0,0,0)"},{offset:.5,color:"rgb(30,30,30)"},{offset:1,color:"rgb(30,30,30)"}])},label:{show:!0,position:"inside",fontFamily:"Quantico, sans-serif",fontSize:14,color:"#fdc203",formatter:p.hscore+"-"+p.ascore+"\n"+moment(p.date,"DD/MM/YYYY HH:mm").format("DD.MM.YYYY")+"\n"+moment(p.date,"DD/MM/YYYY HH:mm").format("HH:mm")}})}r.push({data:n,type:"bar",stack:p.id,label:{show:!0},animationDuration:function(e){return 90*e},animationEasing:"backOut"},{name:p.id,data:l,type:"bar",stack:p.id,label:{show:!0}},{data:s,type:"bar",stack:p.id,label:{show:!0},animationDuration:function(e){return 110*e},animationEasing:"backOut"}),t={baseOption:{title:{text:S,subtext:"Week "+b,x:"center",textStyle:{fontFamily:"Quantico, sans-serif",fontWeight:700,fontSize:25,color:"#000"},subtextStyle:{fontFamily:"Quantico, sans-serif",fontWeight:700,fontSize:20,color:"#000"}},grid:{left:20,right:20,top:60,bottom:10,containLabel:!0},yAxis:{type:"category",show:!1,inverse:!0},xAxis:[{type:"value",show:!1,max:100}],toolbox:{itemSize:40,tooltip:{show:!0,backgroundColor:"transparent",textStyle:{fontSize:12,color:"#000"},extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);"},feature:{saveAsImage:{name:"Fixture",show:!0,pixelRatio:2,backgroundColor:"transparent",title:"Save As Image",icon:"image://"+SaveIcon}},top:0,right:20,zlevel:9},series:r},media:[{query:{maxWidth:1100},option:{}}]},fixtureChart.setOption(t)}),fixtureChart.on("click","series.bar",function(e){"series"===e.componentType&&"bar"===e.seriesType&&(window.location="/single-game.html?gameId="+encodeURIComponent(e.seriesName))})}GetFixtures(localStorage.getItem("fixtureWeek"),localStorage.getItem("fixtureLeague"),localStorage.getItem("LeagueName")),$.get("./assets/data/leagues.json",function(e){for(var t=e.RECORDS,o="",a="",r=0;r<t.length;r++)o+='<div class="item" data-value="'+t[r].logo+'">'+t[r].league+"</div>";$(".league-dd .menu").html(o),$(".league-dd").dropdown({onChange:function(e,t){localStorage.setItem("fixtureLeague",e),localStorage.setItem("LeagueName",t),$.get("./assets/data/"+e+"/weeks.json",function(e){for(var t=0;t<e.RECORDS.length;t++)a+='<div class="item" data-value="'+e.RECORDS[t].week+'">Week '+e.RECORDS[t].week+"</div>";$(".week-dd .menu").html(a),$(".week-dd").dropdown({onChange:function(e){localStorage.setItem("fixtureWeek",e),GetFixtures(e,localStorage.getItem("fixtureLeague"),localStorage.getItem("LeagueName"))}})}),GetFixtures(localStorage.getItem("fixtureWeek"),e,localStorage.getItem("LeagueName"))}})});