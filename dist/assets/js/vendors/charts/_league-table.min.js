var myChart=echarts.init(document.getElementById("table"),null,{renderer:"canvas"});myChart.showLoading(),null===localStorage.getItem("league")&&localStorage.setItem("league","premier-league"),null===localStorage.getItem("week")&&localStorage.setItem("week","week1"),null==localStorage.getItem("chartColor")&&localStorage.setItem("chartColor","55, 0, 60"),null==localStorage.getItem("title1")&&localStorage.setItem("title1","Premier League"),null==localStorage.getItem("title2")&&localStorage.setItem("title2","Week 1"),$(".table-segment").css("background","rgba("+localStorage.getItem("chartColor")+",1)");var SaveIcon="./assets/img/template-images/screenshot.svg";function GetTable(u,f){var w=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"rgba(55, 0, 60,.6)";$.get("./assets/data/"+u+"/table.json",function(e){var t=[],a=[],o=[];a.push(e.status),t.push(e.weeks);var l=[],r=f.replace("week","");$.each(t,function(e,t){l.push([t["week"+r]])});var i=l[0][0],n=[],s=[],g=[],m=[],c=[];for(var d in i)c.push(i[d]);var p=c.sort(function(e,t){return t.pts-e.pts||t.gd-e.gd||t.ga-e.ga||t.gf-e.gf}),h="";$.map(e.weeks,function(e,t,a){h+='<div class="item" data-value="'+t+'"><img src="./assets/img/template-images/calendar.svg" class="ui avatar image calendar-image"/>Week '+t.replace("week","")+"</div>",$(".ui.dropdown.week-select").dropdown("set selected",localStorage.getItem("week"))}),$(".week-menu").html(h);for(d=0;d<p.length;d++)s.push({value:81,name:p[d].name,itemStyle:{color:new echarts.graphic.RadialGradient(0,10,2,[{offset:0,color:"rgb(251, 118, 123)"},{offset:1,color:"rgba("+w+",.6)"}])},tooltip:{show:!1},label:{color:"black",position:[40,9],rich:{start1:{backgroundColor:{image:"./assets/img/leagues/"+u+"/team-logo/"+p[d].logo+".png"},width:40,height:40,align:"left"},up:{backgroundColor:{image:"./assets/img/template-images/up.svg"}},down:{backgroundColor:{image:"./assets/img/template-images/down.svg"}},black:{color:"#fff",fontSize:16,align:"left"}},formatter:function(e){return"  {black|"+(e.dataIndex+1)+".}    {start1|}    {black|"+e.name+"}"}}}),o.push({value:4,name:p[d].previous_position+"-"+p[d].league_position,itemStyle:{color:"transparent"},tooltip:{backgroundColor:"#000",textStyle:{color:"#fff",textShadowColor:"red",textShadowBlur:20,fontSize:20},position:"right",padding:10,extraCssText:"margin-left:-40px;background:linear-gradient(180deg, "+p[d].color2+" 50%, "+p[d].color1+" 50%)",formatter:function(e){var t=e.name.split("-"),a=parseInt(t[0]);parseInt(t[1]);return 0==a?"First Week":"Previus Position : "+a}},label:{show:!0,position:[20,23],rich:{up:{backgroundColor:{image:"./assets/img/template-images/up.svg"},width:15,height:15},down:{backgroundColor:{image:"./assets/img/template-images/down.svg"},width:15,height:15},fixed:{backgroundColor:{image:"./assets/img/template-images/eq.svg"},width:12,height:12}},formatter:function(e){var t="",a=e.name.split("-"),o=parseInt(a[0]),l=parseInt(a[1]);return 0==o?t="{fixed|}        ":l<o?t="{up|}        ":o<l?t="{down|}        ":l==o&&(t="{fixed|}        "),t}}}),g.push({value:10,name:p[d].lp,itemStyle:{color:new echarts.graphic.RadialGradient(0,10,2,[{offset:0,color:"rgb(251, 118, 123)"},{offset:1,color:"rgba("+w+",.6)"}])},tooltip:{backgroundColor:"#000",textStyle:{color:"#fff",textShadowColor:"red",textShadowBlur:20,fontSize:12},position:"top",padding:10,extraCssText:"margin-left:-80px;margin-top:20px",formatter:function(e){for(var t="Last 5 Mactch<hr/>",a=0;a<e.data.name.length;a++)"1"==e.data.name[a].name?t+="Won-"+e.data.name[a].value+"<br/>":"0"==e.data.name[a].name?t+="Draw-"+e.data.name[a].value+"<br/>":"2"==e.data.name[a].name&&(t+="Lost-"+e.data.name[a].value+"<br/>");return t}},label:{color:"black",position:[30,"30%"],align:"left",rich:{win:{backgroundColor:{image:"./assets/img/template-images/win1.svg"},width:20,height:20},draw:{backgroundColor:{image:"./assets/img/template-images/draw1.svg"},width:20,height:20},lost:{backgroundColor:{image:"./assets/img/template-images/lost1.svg"},width:20,height:20}},formatter:function(e){console.log(e.data.name.length);for(var t="",a=0;a<e.data.name.length;a++)"1"==e.data.name[a].name?t+="{win|}":"0"==e.data.name[a].name?t+="{draw|}":"2"==e.data.name[a].name&&(t+="{lost|}");return t}}}),m.push({value:10,name:p[d].next_play,itemStyle:{color:new echarts.graphic.RadialGradient(0,10,2,[{offset:0,color:"rgb(251, 118, 123)"},{offset:1,color:"rgba("+w+",.6)"}])},tooltip:{backgroundColor:"#000",textStyle:{color:"#fff",textShadowColor:"red",textShadowBlur:20,fontSize:14,align:"center"},position:"top",padding:10,extraCssText:"margin-left:-80px;margin-top:20px",formatter:function(e){return"Next Round<hr/>"+e.data.name.name+"<br />"+e.data.name.date}},label:{color:"black",position:"inside",align:"left",rich:{win:{backgroundColor:{image:"./assets/img/leagues/"+u+"/team-logo/"+p[d].next_play.logo+".png"},width:30,height:30}},formatter:function(){return"{win|}"}}}),n.push([d,5,p[d].win+p[d].draw+p[d].lost],[d,6,p[d].win],[d,7,p[d].draw],[d,8,p[d].lost],[d,9,p[d].gf],[d,10,p[d].ga],[d,11,p[d].gf-p[d].ga],[d,12,3*p[d].win+p[d].draw]);e=(e=n).map(function(e){return[e[1],e[0],e[2]]}),option={textStyle:{fontFamily:"Exo_2, sans-serif",fontWeight:400},title:{text:localStorage.getItem("title1")+"-"+localStorage.getItem("title2"),left:"17",top:10,textStyle:{fontFamily:"Quantico, sans-serif",fontWeight:700,fontSize:40,color:"#FBE122"}},tooltip:{position:"top"},grid:{top:100,left:0,right:0,bottom:50,containLabel:!1},toolbox:{itemSize:40,tooltip:{show:!0,backgroundColor:"#fff",textStyle:{fontSize:12,color:"#000"},extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);"},feature:{saveAsImage:{show:!0,pixelRatio:2,backgroundColor:"rgba("+w+",.6)",title:"Save As Image",icon:"image://"+SaveIcon}},top:10,right:20,zlevel:9},xAxis:[{position:"top",type:"category",data:["Pos.","Club","","","","Play","Won","Draw","Lost","GF","GA","GD","Pts","Form","","Next"],splitArea:{show:!0,interval:12},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{fontSize:18,margin:17,color:"#fff",verticalAlign:"middle"}},{type:"value",show:!1,max:100}],yAxis:{type:"category",inverse:!0,splitArea:{show:!0},axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1}},series:[{name:"",type:"heatmap",data:e,blurSize:1,minOpacity:1,zlevel:9,label:{normal:{show:!0,fontSize:16}},itemStyle:{color:"rgba(0,0,0,0)"}},{name:"",type:"bar",barWidth:60,zlevel:9,data:o,xAxisIndex:1},{name:"",type:"bar",barWidth:60,zlevel:9,data:a[0],xAxisIndex:1},{name:"",type:"bar",barWidth:60,stack:"扫描量",animationThreshold:100,animationDuration:function(e){return 30*e},data:s,xAxisIndex:1,label:{normal:{show:!0,fontSize:16}}},{type:"bar",barGap:"-100%",barWidth:60,animation:!1,z:99,stack:"扫描量",xAxisIndex:1,itemStyle:{color:"#2f3b4e"},label:{show:!0},data:g},{type:"bar",barGap:"-100%",barWidth:60,animation:!1,z:100,zlevel:1090,stack:"扫描量",xAxisIndex:1,itemStyle:{color:"#2f3b4e"},label:{show:!0},data:m}]},myChart.hideLoading(),myChart.setOption(option)})}$(".ui.dropdown.league-select").dropdown({onChange:function(e,t){localStorage.setItem("league",e),GetTable(e,localStorage.getItem("week"),localStorage.getItem("chartColor")),localStorage.setItem("title1",t.replace(/(<([^>]+)>)/gi,""))}}).dropdown("set selected",localStorage.getItem("league")),$(".ui.dropdown.week-select").dropdown({onChange:function(e,t){localStorage.setItem("week",e),GetTable(localStorage.getItem("league"),e,localStorage.getItem("chartColor")),localStorage.setItem("title2",t.replace(/(<([^>]+)>)/gi,""))}}).dropdown("set selected",localStorage.getItem("week").replace("week","")),$(".ui.dropdown.color-select").dropdown({onChange:function(e){localStorage.setItem("chartColor",e),$(".table-segment").css("background","rgba("+e+",1)"),GetTable(localStorage.getItem("league"),localStorage.getItem("week"),e)}}).dropdown("set selected",localStorage.getItem("chartColor")),GetTable(localStorage.getItem("league"),localStorage.getItem("week"),localStorage.getItem("chartColor"));